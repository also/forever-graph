<script src="processing.js"></script>
<canvas id="viz" width="800" height="600"></canvas>
<script>
var canvas = document.getElementById('viz');
var pjs = [];
var p = Processing(canvas);

var data = JSON.parse(p.ajax('data.json'));
data.nextEdges = [];

for (var i = 0; i < data.edges.length; i++) {
  var edge = data.edges[i];
  if (edge[0] + 1 == edge[1]) {
    edge.isNext = true;
    data.nextEdges.push(edge);
  }
  var start = data.coords[edge[0]];
  var end = data.coords[edge[1]];
  start.outgoing = start.outgoing || [];
  start.outgoing.push(edge);
  end.incoming = end.incoming || [];
  end.incoming.push(edge);
}

p.init(p.ajax('pjs/test.pjs'));
</script>
